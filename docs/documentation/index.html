<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Documentation - Checkpoint</title>
  <meta name="description" content="Documentation for Checkpoint save game manager - User guide and technical details">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/lucide@latest"></script>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header class="mobile-header">
    <button class="menu-toggle" id="menuToggle">
      <i data-lucide="menu"></i>
    </button>
    <span class="mobile-title">Docs</span>
    <a href="../index.html" class="home-link">
      <i data-lucide="home"></i>
    </a>
  </header>

  <aside class="sidebar" id="sidebar">
    <div class="sidebar-header">
      <a href="../index.html" class="logo-link">
        <div class="logo">C</div>
        <span>Checkpoint</span>
      </a>
    </div>
    
    <nav class="sidebar-nav">
      <div class="nav-section">
        <h3>User Guide</h3>
        <ul>
          <li><a href="#quickstart">Quick Start</a></li>
          <li><a href="#cloud-backup">Cloud Backup</a></li>
          <li><a href="#faq">FAQ</a></li>
        </ul>
      </div>
      
      <div class="nav-section">
        <h3>Technical</h3>
        <ul>
          <li><a href="#tech-stack">Tech Stack</a></li>
          <li><a href="#storage">How Storage Works</a></li>
          <li><a href="#gdrive">Google Drive Integration</a></li>
          <li><a href="#privacy">Privacy & Security</a></li>
          <li><a href="#building">Building from Source</a></li>
        </ul>
      </div>
    </nav>
    
    <div class="sidebar-footer">
      <a href="https://github.com/rzinak/checkpoint" target="_blank">
        <i data-lucide="github"></i>
        GitHub
      </a>
    </div>
  </aside>

  <main class="main-content">
    <div class="content">
      <section id="quickstart">
        <h1>Checkpoint Documentation</h1>
        <p class="lead">
          Quick guide to protecting your game saves.
        </p>
        
        <h2>Quick Start</h2>
        
        <h3>1. Add Your First Game</h3>
        <ul>
          <li>Click "Add Game"</li>
          <li>Enter game name</li>
          <li>Select save folder location</li>
          <li>Optional: Add executable name for process checking</li>
        </ul>
        
        <h3>2. Create a Snapshot</h3>
        <ul>
          <li>Click on your game card</li>
          <li>Click "Create Snapshot"</li>
          <li>Choose backup destination: Local, Cloud, or Both</li>
          <li>Name it (e.g., "Before Boss Fight")</li>
        </ul>
        
        <h3>3. Restore a Save</h3>
        <ul>
          <li>Click restore button on any snapshot</li>
          <li>Current save is auto-backed up first</li>
          <li>Game must be closed to restore</li>
        </ul>

        <div class="tip">
          <strong>Pro Tip:</strong> Use descriptive names for snapshots so you remember what they contain.
        </div>
      </section>

      <section id="cloud-backup">
        <h2>Cloud Backup</h2>
        
        <h3>Setting Up</h3>
        <ol>
          <li>Sign in with Google in the Profile section</li>
          <li>Set backup destination to "Cloud" or "Both"</li>
          <li>Snapshots automatically upload to your Google Drive</li>
        </ol>
        
        <h3>Where Are Cloud Saves Stored?</h3>
        <p>
          Cloud backups are stored in Google's <strong>appDataFolder</strong> - a special hidden folder in your Google Drive.
        </p>
        <ul>
          <li><strong>Not visible</strong> in your main Drive view</li>
          <li><strong>Doesn't count</strong> toward your Drive storage limit</li>
          <li><strong>Only accessible</strong> by this app</li>
          <li><strong>Cross-device</strong> - log in on any computer to access saves</li>
        </ul>
        
        <h3>Why appDataFolder?</h3>
        <p>
          This is the standard way apps store user data in Google Drive. It keeps your saves:
        </p>
        <ul>
          <li>Separate from your personal files</li>
          <li>Protected from accidental deletion</li>
          <li>Private (other apps can't access them)</li>
        </ul>
      </section>

      <section id="faq">
        <h2>FAQ</h2>
        
        <div class="faq-item">
          <h4>Where are local backups stored?</h4>
          <p>By default: <code>~/checkpoint/</code> on your home drive. You can change this in Settings.</p>
        </div>
        
        <div class="faq-item">
          <h4>Can I access cloud saves from another computer?</h4>
          <p>Yes! Just sign in with the same Google account on the other computer. Your cloud saves will appear.</p>
        </div>
        
        <div class="faq-item">
          <h4>Does deleting a game delete my actual saves?</h4>
          <p><strong>No.</strong> Deleting from Checkpoint only removes the entry and backups. Your actual game saves remain untouched.</p>
        </div>
        
        <div class="faq-item">
          <h4>How much space do snapshots use?</h4>
          <p>Each snapshot is a complete copy of your save folder. The app shows the size of each snapshot.</p>
        </div>
        
        <div class="faq-item">
          <h4>Why can't I restore while the game is running?</h4>
          <p>Safety feature. The game might be writing to save files, which could corrupt them. Close the game first.</p>
        </div>
      </section>

      <section id="tech-stack">
        <h2>Technical Details</h2>
        
        <h3>Tech Stack</h3>
        <ul>
          <li><strong>Frontend:</strong> React + TypeScript + Vite</li>
          <li><strong>Backend:</strong> Rust + Tauri v2</li>
          <li><strong>UI:</strong> Custom CSS with Lucide icons</li>
          <li><strong>Process Checking:</strong> sysinfo crate</li>
          <li><strong>Cloud:</strong> Google Drive API v3</li>
        </ul>
        
        <h3>Architecture</h3>
        <p>
          Checkpoint uses Tauri's multi-process architecture:
        </p>
        <ul>
          <li><strong>WebView Process:</strong> Runs the React frontend</li>
          <li><strong>Main Process:</strong> Rust backend handling file operations</li>
          <li><strong>Isolation:</strong> Frontend can't access filesystem directly</li>
        </ul>
      </section>

      <section id="storage">
        <h2>How Storage Works</h2>
        
        <h3>Local Storage</h3>
        <pre><code>~/checkpoint/
├── [game-id-1]/
│   ├── [timestamp-1].zip
│   ├── [timestamp-2].zip
│   └── ...
├── [game-id-2]/
│   └── ...
└── config.json</code></pre>
        
        <h3>Snapshot Format</h3>
        <p>
          Each snapshot is a ZIP file containing:
        </p>
        <ul>
          <li>All files from the save folder</li>
          <li>Directory structure preserved</li>
          <li>Compressed to save space</li>
        </ul>
        
        <h3>Configuration</h3>
        <p>
          Config file location:
        </p>
        <ul>
          <li><strong>Linux/macOS:</strong> <code>~/.config/checkpoint/config.json</code></li>
          <li><strong>Windows:</strong> <code>%APPDATA%\checkpoint\config.json</code></li>
        </ul>
      </section>

      <section id="gdrive">
        <h2>Google Drive Integration</h2>
        
        <h3>Authentication</h3>
        <p>
          Uses OAuth 2.0 with PKCE (Proof Key for Code Exchange):
        </p>
        <ol>
          <li>User clicks "Sign in with Google"</li>
          <li>App opens browser to Google's OAuth page</li>
          <li>Local HTTP server receives auth code</li>
          <li>Tokens stored locally (never sent to our servers)</li>
        </ol>
        
        <h3>Permissions</h3>
        <p>
          The app requests minimal permissions:
        </p>
        <ul>
          <li><code>https://www.googleapis.com/auth/drive.appdata</code> - Access appDataFolder only</li>
          <li>No access to your photos, documents, or other Drive files</li>
        </ul>

        <h3>Data Flow</h3>
        <pre><code>Your Computer
     ↓
Create ZIP
     ↓
Google Drive API (encrypted transfer)
     ↓
Your Google Drive
(stored in appDataFolder - hidden from main view)</code></pre>
        
        <h3>Why We Can't See Your Data</h3>
        <ul>
          <li>No backend servers - app talks directly to Google</li>
          <li>OAuth tokens stored only on your device</li>
          <li>We don't have Google API credentials to access your data</li>
          <li>Open source - you can verify no tracking code exists</li>
        </ul>
      </section>

      <section id="privacy">
        <h2>Privacy & Security</h2>
        
        <h3>100% Private Design</h3>
        <ul>
          <li><strong>No servers:</strong> App works entirely on your device</li>
          <li><strong>No analytics:</strong> No tracking, no metrics collection</li>
          <li><strong>No accounts:</strong> Optional Google sign-in only for cloud backup</li>
          <li><strong>Local-first:</strong> Works completely offline without cloud</li>
        </ul>
        
        <h3>Security Measures</h3>
        <ul>
          <li>Tauri v2 capability system restricts file access to necessary folders only</li>
          <li>Google Drive tokens stored securely in OS keychain</li>
          <li>All file operations happen locally on your machine</li>
        </ul>
        
        <h3>What We DON'T Collect</h3>
        <ul>
          <li>❌ Game lists or save file contents</li>
          <li>❌ Usage statistics or telemetry</li>
          <li>❌ Crash reports (unless you manually submit)</li>
          <li>❌ IP addresses or location data</li>
          <li>❌ Any personal information</li>
        </ul>
      </section>

      <section id="building">
        <h2>Building from Source</h2>
        
        <h3>Prerequisites</h3>
        
        <h4>Linux (Ubuntu/Debian)</h4>
        <pre><code>sudo apt update
sudo apt install -y \
  libwebkit2gtk-4.1-dev \
  libgtk-3-dev \
  libayatana-appindicator3-dev \
  librsvg2-dev \
  patchelf \
  pkg-config \
  build-essential</code></pre>
        
        <h4>All Platforms</h4>
        <ul>
          <li><a href="https://rustup.rs/">Rust</a> (latest stable)</li>
          <li><a href="https://nodejs.org/">Node.js</a> 18+</li>
        </ul>
        
        <h3>Development Setup</h3>
        <pre><code># Clone repository
git clone https://github.com/rzinak/checkpoint.git
cd checkpoint

# Install dependencies
npm install

# Run in development mode
npm run tauri-dev

# Build for production
npm run tauri-build</code></pre>
        
        <h3>Project Structure</h3>
        <pre><code>checkpoint/
├── src/                    # React frontend
│   ├── components/         # UI components
│   ├── lib/               # API, types, i18n
│   └── App.tsx            # Main app
├── src-tauri/             # Rust backend
│   ├── src/               # Rust source
│   │   ├── commands.rs    # Tauri commands
│   │   ├── lib.rs         # Core logic
│   │   └── ...
│   ├── Cargo.toml         # Rust deps
│   └── tauri.conf.json    # Tauri config
├── src/i18n/              # Translations (en, pt, es)
└── docs/                  # Website & documentation</code></pre>
        
        <h3>Development Notes</h3>
        <ul>
          <li>TypeScript interfaces use snake_case to match Rust structs</li>
          <li>Tauri commands handle all file system operations</li>
          <li>Frontend never accesses filesystem directly</li>
          <li>See capabilities in <code>src-tauri/capabilities/</code></li>
        </ul>
      </section>

      <section id="troubleshooting">
        <h2>Troubleshooting</h2>
        
        <h3>Common Issues</h3>
        
        <div class="troubleshoot-item">
          <h4>"Failed to create snapshot"</h4>
          <ul>
            <li>Check that save folder exists and is readable</li>
            <li>Ensure you have write permission to backup location</li>
            <li>Check available disk space</li>
          </ul>
        </div>
        
        <div class="troubleshoot-item">
          <h4>"Cannot sign in with Google"</h4>
          <ul>
            <li>Ensure default browser can open</li>
            <li>Check firewall isn't blocking localhost callback</li>
            <li>Try signing in again - tokens expire</li>
          </ul>
        </div>
        
        <div class="troubleshoot-item">
          <h4>"Game shows as running but isn't"</h4>
          <ul>
            <li>Check task manager for lingering processes</li>
            <li>Executable name might have changed in game update</li>
          </ul>
        </div>
        
        <h3>Getting Help</h3>
        <ul>
          <li><a href="https://github.com/rzinak/checkpoint/issues">GitHub Issues</a> - Bug reports & feature requests</li>
          <li>Check the <a href="../index.html">main website</a> for latest updates</li>
        </ul>
      </section>
    </div>
  </main>

  <script src="script.js"></script>
  <script>
    lucide.createIcons();
  </script>
</body>
</html>
